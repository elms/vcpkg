vcpkg_from_github(
    OUT_SOURCE_PATH SOURCE_PATH
    REPO elms/wolfssl
    REF cmake/out_of_src
    SHA512 3c806af06a605f2041245391872874d1fae201854b36f539002ccb0f76153a20fdbbb3c2c8f8a3082da30422a09d2f14cfadc2266f765445c6f418279f86886a
    HEAD_REF master
    )

vcpkg_cmake_configure(SOURCE_PATH ${SOURCE_PATH} OPTIONS -DWOLFSSL_EXAMPLES=no -DWOLFSSL_CRYPT_TESTS=no -DWOLFSSL_OPENSSLEXTRA=yes -DWOLFSSL_TPM=yes -DWOLFSSL_TLSX=yes -DCMAKE_C_FLAGS_INIT="-DWOLFSSL_ALT_CERT_CHAINS")

vcpkg_cmake_install()
file(INSTALL "${SOURCE_PATH}/COPYING" DESTINATION "${CURRENT_PACKAGES_DIR}/share/wolfssl" RENAME copyright)

vcpkg_cmake_config_fixup(CONFIG_PATH lib/cmake/wolfssl)

file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/include")
file(REMOVE_RECURSE "${CURRENT_PACKAGES_DIR}/debug/share")
